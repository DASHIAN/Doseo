<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <title>Spring Framework</title>
   <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">   
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" 
      integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" 
      crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>   

</head>
<body>
	<div class="container" align="center">
		<div class="mt-4 p-5" style="background-color: #141414; color: #ffffff;">
			<h1 style="position: absolute;">Doseo</h1>
			<p></p>
		</div>
	</div>
	<div class="container mt-5 justify-content-center">
		<form th:action="insertBook"  method="post" enctype="multipart/form-data">
			<div class="modal-content">				
				<div class="modal-header bg-primary text-white">
					<h1 class="motal-title fs-5" id="staticBackdropLabel">도서정보 등록하기</h1>
				</div> <!-- modal-header -->
				<div class="modal-body">
					<div class="input-group mb-3">
						<div class="input-group-text"><i class="fas fa-pen"></i></div>
						<input type="text" name="title" class="form-control" id="title" required placeholder="제목을 입력해주세요">
					</div>
					<div class="input-group mb-3">
						<div class="input-group-text"><i class="fas fa-pen"></i></div>
						<input type="text" name="writer" class="form-control" id="writer" required placeholder="작가를 입력해주세요">
					</div>
					<div class="input-group mb-3">
						<div class="input-group-text"><i class="fas fa-pen"></i></div>
						<input type="text" name="rentId" class="form-control" id="rentId" th:value="대여가능" required placeholder="대여중인 회원" readonly>
					</div>
					<div class="input-group mb-3">
					  <span class="input-group-text"><i class="fas fa-clipboard"></i></span>
					  <textarea class="form-control"  name="content" rows="5" placeholder="도서정보를 입력해주세요"></textarea>
					</div>
					<div class="input-group mb-3">
					  <label class="input-group-text" for="uploadFile"><i class="fas fa-file"></i></label>
					  <input type="file" class="form-control" name="uploadFile" id="uploadFile" aria-describedby="uploadFile" aria-label="Upload">
					  <div id="imagePreview"></div>	
					  <script>
					    // 이미지 업로드 input의 change 이벤트 리스너를 등록합니다.
					    document.getElementById("uploadFile").addEventListener("change", function(event) {
					        // 이미지 미리보기를 표시할 div 엘리먼트를 가져옵니다.
					        var imagePreviewDiv = document.getElementById("imagePreview");
					        
					        // 이전에 미리보기한 이미지가 있다면 제거합니다.
					        imagePreviewDiv.innerHTML = "";
					
					        // 선택한 이미지 파일들을 읽어와서 미리보기를 생성합니다.
					        var files = event.target.files;
					        for (var i = 0; i < files.length; i++) {
					            var file = files[i];
					            var reader = new FileReader();
					
					            reader.onload = function(event) {
					                // 이미지 미리보기를 위한 img 엘리먼트를 생성합니다.
					                var img = document.createElement("img");
					                img.src = event.target.result;
					                img.alt = "사진";
					                img.style.width = "80%";
					                img.style.height = "80%";
					
					                // 이미지를 미리보기할 div에 추가합니다.
					                imagePreviewDiv.appendChild(img);
					            }
					            reader.readAsDataURL(file); // 이미지 파일을 Data URL로 읽어옵니다.
					        }
					    });
					 </script>		
					</div>
				</div> 
				<div class="modal-footer">
				    <input type="submit" class="btn btn-primary  mt-3 me-2 " value="도서등록" />
				    <a th:href="@{/bookList}" class="btn btn-primary  mt-3 me-2 ">도서목록</a>					
				</div> 
			</div> 
		</form>	
	</div>	
</body>
</html>